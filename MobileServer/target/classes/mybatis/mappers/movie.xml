<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="movie">
	<!-- 데이터 갱신 작업 -->
	<insert id="update" parameterType="Movie">
		insert into movies(movie_id, vote_average, title, poster_path, backdrop_path, orignal_language, orignal_title, adult, overview, releasedate, status)
		values(#{movieId}, #{voteAverage}, #{title}, #{posterPath}, #{backdropPath}, #{originalLanguage}, #{originalTitle}, #{adult}, #{overview}, #{releaseDate}, #{status})
	</insert>
	
	<!-- 갱신 이전 데이터 삭제 -->
	<delete id="movieDelete">
		delete from movies	
	</delete>
	
	<!-- 영화 목록 가져오기 -->
	<select id="movieList" parameterType="java.lang.String" resultType="Movie">
		select movie_id, vote_average, title, poster_path 
		from movies
		where status = #{status}
		order by releasedate desc
	</select>
	

	<!-- 영화 상세정보 가져오기 -->
	<select id="movieDetail" parameterType="java.lang.String" resultType="Movie">
		select vote_average, title, poster_path, backdrop_path, orignal_language,
		orignal_title, adult, overview, releasedate
		from movies
		where movie_id = #{movieId}
	</select>



</mapper>